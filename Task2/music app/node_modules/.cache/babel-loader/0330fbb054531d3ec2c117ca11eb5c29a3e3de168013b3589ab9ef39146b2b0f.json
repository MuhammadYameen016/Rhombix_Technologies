{"ast":null,"code":"import\"./App.css\";import{useContext,useEffect,useState}from\"react\";import Card from\"./components/Card\";import CreatePlaylist from\"./components/CreatePlaylist\";import{initializePlaylist}from\"./initialize\";import Navbar from\"./components/Navbar\";import{MusicContext}from\"./Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[keyword,setKeyword]=useState(\"\");const[message,setMessage]=useState(\"\");const[tracks,setTracks]=useState([]);const[token,setToken]=useState(null);const musicContext=useContext(MusicContext);const isLoading=musicContext.isLoading;const setIsLoading=musicContext.setIsLoading;const setLikedMusic=musicContext.setLikedMusic;const setpinnedMusic=musicContext.setPinnedMusic;const resultOffset=musicContext.resultOffset;const setResultOffset=musicContext.setResultOffset;const fetchMusicData=async()=>{setTracks([]);window.scrollTo(0,0);setIsLoading(true);try{const response=await fetch(`https://api.spotify.com/v1/search?q=${keyword}&type=track&offset=${resultOffset}`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error(\"Failed to fetch music data\");}const jsonData=await response.json();setTracks(jsonData.tracks.items);}catch(error){setMessage(error.message);console.log(error.message);}finally{setIsLoading(false);}};const handleKeyPress=event=>{if(event.key===\"Enter\"){setResultOffset(0);fetchMusicData();}};useEffect(()=>{initializePlaylist();const fetchToken=async()=>{try{const response=await fetch(\"https://accounts.spotify.com/api/token\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:\"grant_type=client_credentials&client_id=a77073181b7d48eb90003e3bb94ff88a&client_secret=68790982a0554d1a83427e061e371507\"});if(!response.ok){throw new Error(\"Failed to fetch token\");}const jsonData=await response.json();setToken(jsonData.access_token);}catch(error){setMessage(error.message);}finally{setIsLoading(false);}};fetchToken();setLikedMusic(JSON.parse(localStorage.getItem(\"likedMusic\")));setpinnedMusic(JSON.parse(localStorage.getItem(\"pinnedMusic\")));},[setIsLoading,setLikedMusic,setpinnedMusic]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{keyword:keyword,setKeyword:setKeyword,handleKeyPress:handleKeyPress,fetchMusicData:fetchMusicData}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:`row ${isLoading?\"\":\"d-none\"}`,children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 py-5 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",style:{width:\"3rem\",height:\"3rem\"},role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:tracks.map(element=>{return/*#__PURE__*/_jsx(Card,{element:element},element.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",hidden:tracks.length===0,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setResultOffset(previous=>previous-20);fetchMusicData();},className:\"btn btn-outline-success w-100\",disabled:resultOffset===0,children:[\"Previous Next Page: \",resultOffset/20]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setResultOffset(previous=>previous+20);fetchMusicData();},className:\"btn btn-outline-success w-100\",children:[\"Next Page: \",resultOffset/20+2]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-center text-danger py-2\",children:message})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 py-5 text-center\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-music-note-list mx-3\"}),\"v-music\"]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade position-absolute\",id:\"exampleModal\",tabIndex:-1,\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(CreatePlaylist,{})})]});}export default App;","map":{"version":3,"names":["useContext","useEffect","useState","Card","CreatePlaylist","initializePlaylist","Navbar","MusicContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","keyword","setKeyword","message","setMessage","tracks","setTracks","token","setToken","musicContext","isLoading","setIsLoading","setLikedMusic","setpinnedMusic","setPinnedMusic","resultOffset","setResultOffset","fetchMusicData","window","scrollTo","response","fetch","headers","Authorization","ok","Error","jsonData","json","items","error","console","log","handleKeyPress","event","key","fetchToken","method","body","access_token","JSON","parse","localStorage","getItem","children","className","style","width","height","role","map","element","id","hidden","length","onClick","previous","disabled","tabIndex"],"sources":["C:/Users/Admin/Desktop/v-music/src/App.js"],"sourcesContent":["import \"./App.css\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport Card from \"./components/Card\";\r\nimport CreatePlaylist from \"./components/CreatePlaylist\";\r\nimport { initializePlaylist } from \"./initialize\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { MusicContext } from \"./Context\";\r\n\r\nfunction App() {\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [tracks, setTracks] = useState([]);\r\n  const [token, setToken] = useState(null);\r\n\r\n  const musicContext = useContext(MusicContext);\r\n  const isLoading = musicContext.isLoading;\r\n  const setIsLoading = musicContext.setIsLoading;\r\n  const setLikedMusic = musicContext.setLikedMusic;\r\n  const setpinnedMusic = musicContext.setPinnedMusic;\r\n  const resultOffset = musicContext.resultOffset;\r\n  const setResultOffset = musicContext.setResultOffset;\r\n\r\n  const fetchMusicData = async () => {\r\n    setTracks([]);\r\n    window.scrollTo(0, 0);\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(\r\n        `https://api.spotify.com/v1/search?q=${keyword}&type=track&offset=${resultOffset}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch music data\");\r\n      }\r\n\r\n      const jsonData = await response.json();\r\n\r\n      setTracks(jsonData.tracks.items);\r\n    } catch (error) {\r\n      setMessage(error.message);\r\n      console.log(error.message)\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      setResultOffset(0);\r\n      fetchMusicData();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    initializePlaylist();\r\n\r\n    const fetchToken = async () => {\r\n      try {\r\n        const response = await fetch(\"https://accounts.spotify.com/api/token\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          },\r\n          body: \"grant_type=client_credentials&client_id=a77073181b7d48eb90003e3bb94ff88a&client_secret=68790982a0554d1a83427e061e371507\",\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch token\");\r\n        }\r\n\r\n        const jsonData = await response.json();\r\n        setToken(jsonData.access_token);\r\n      } catch (error) {\r\n        setMessage(error.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchToken();\r\n    setLikedMusic(JSON.parse(localStorage.getItem(\"likedMusic\")));\r\n    setpinnedMusic(JSON.parse(localStorage.getItem(\"pinnedMusic\")));\r\n  }, [setIsLoading, setLikedMusic, setpinnedMusic]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar\r\n        keyword={keyword}\r\n        setKeyword={setKeyword}\r\n        handleKeyPress={handleKeyPress}\r\n        fetchMusicData={fetchMusicData}\r\n      />\r\n\r\n      <div className=\"container\">\r\n        <div className={`row ${isLoading ? \"\" : \"d-none\"}`}>\r\n          <div className=\"col-12 py-5 text-center\">\r\n            <div\r\n              className=\"spinner-border\"\r\n              style={{ width: \"3rem\", height: \"3rem\" }}\r\n              role=\"status\"\r\n            >\r\n              <span className=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {tracks.map((element) => {\r\n            return <Card key={element.id} element={element} />;\r\n          })}\r\n        </div>\r\n        <div className=\"row\" hidden={tracks.length === 0}>\r\n          <div className=\"col\">\r\n            <button\r\n              onClick={() => {\r\n                setResultOffset((previous) => previous - 20);\r\n                fetchMusicData();\r\n              }}\r\n              className=\"btn btn-outline-success w-100\"\r\n              disabled={resultOffset === 0}\r\n            >\r\n              Previous Next Page: {resultOffset / 20}\r\n            </button>\r\n          </div>\r\n          <div className=\"col\">\r\n            <button\r\n              onClick={() => {\r\n                setResultOffset((previous) => previous + 20);\r\n                fetchMusicData();\r\n              }}\r\n              className=\"btn btn-outline-success w-100\"\r\n            >\r\n              Next Page: {resultOffset / 20 + 2}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h4 className=\"text-center text-danger py-2\">{message}</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-12 py-5 text-center\">\r\n            <h1>\r\n              <i className=\"bi bi-music-note-list mx-3\"></i>\r\n              v-music\r\n            </h1>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"modal fade position-absolute\"\r\n        id=\"exampleModal\"\r\n        tabIndex={-1}\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <CreatePlaylist />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}